{
  "resourceType": "Measure",
  "id": "EXM55-FHIR",
  "meta": {
    "profile": [ "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-cvmeasure", "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-computablemeasure", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablemeasure", "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-cqlmeasure", "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-computablemeasure" ]
  },
  "contained": [ {
    "resourceType": "Library",
    "id": "effective-data-requirements-exm55",
    "extension": [ {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/diagnosis-role",
        "code": "billing",
        "display": "Billing"
      }
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Inpatient Encounter"
      }, {
        "url": "statement",
        "valueString": "define \"Inpatient Encounter\" :\n  [\"Encounter\"] Encounter\n    where LengthInDays(Encounter.period) <= 120\n      and Encounter.period ends during \"Measurement Period\""
      }, {
        "url": "displaySequence",
        "valueInteger": 0
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Stratification 3"
      }, {
        "url": "statement",
        "valueString": "define \"Stratification 3\" :\n  \"Inpatient Encounter\" Encounter\n    where PrincipalDiagnosis(Encounter) is null"
      }, {
        "url": "displaySequence",
        "valueInteger": 1
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Stratification 2"
      }, {
        "url": "statement",
        "valueString": "define \"Stratification 2\" :\n  \"Inpatient Encounter\" Encounter\n    where PrincipalDiagnosis(Encounter).code in \"Psychiatric/Mental Health Patient\""
      }, {
        "url": "displaySequence",
        "valueInteger": 2
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Measure Population Exclusion"
      }, {
        "url": "statement",
        "valueString": "define \"Measure Population Exclusion\" :\n  \"Inpatient Encounter\" Encounter\n    with [\"Encounter\" : \"Emergency Department Visit\"] ED\n      such that ED.period ends 1 hour or less before start of Encounter.period\n        and ED.status = 'finished'\n        and ED.hospitalization.admitSource in \"Hospital Settings\""
      }, {
        "url": "displaySequence",
        "valueInteger": 3
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Stratification 1"
      }, {
        "url": "statement",
        "valueString": "define \"Stratification 1\" :\n  \"Inpatient Encounter\" Encounter\n    where not (PrincipalDiagnosis(Encounter).code in \"Psychiatric/Mental Health Patient\")"
      }, {
        "url": "displaySequence",
        "valueInteger": 4
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Initial Population"
      }, {
        "url": "statement",
        "valueString": "define \"Initial Population\" :\n  \"Inpatient Encounter\" Encounter\n    with [\"Encounter\" : \"Emergency Department Visit\"] ED\n     such that ED.status = 'finished'\n       and ED.period ends 1 hour or less before start of Encounter.period"
      }, {
        "url": "displaySequence",
        "valueInteger": 5
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Measure Population"
      }, {
        "url": "statement",
        "valueString": "define \"Measure Population\" :\n  \"Initial Population\""
      }, {
        "url": "displaySequence",
        "valueInteger": 6
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "LengthInDays"
      }, {
        "url": "statement",
        "valueString": "define function \"LengthInDays\"(Value Interval<DateTime>):\n\tdifference in days between start of Value and end of Value"
      }, {
        "url": "displaySequence",
        "valueInteger": 7
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToInterval"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Converts the given [Period](https://hl7.org/fhir/datatypes.html#Period)\nvalue to a CQL DateTime Interval\n@comment: If the start value of the given period is unspecified, the starting\nboundary of the resulting interval will be open (meaning the start of the interval\nis unknown, as opposed to interpreted as the beginning of time).\n*/\ndefine function ToInterval(period FHIR.Period):\n    if period is null then\n        null\n    else\n        if period.\"start\" is null then\n            Interval(period.\"start\".value, period.\"end\".value]\n        else\n            Interval[period.\"start\".value, period.\"end\".value]"
      }, {
        "url": "displaySequence",
        "valueInteger": 8
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "PrincipalDiagnosis"
      }, {
        "url": "statement",
        "valueString": "define function \"PrincipalDiagnosis\"(Encounter Encounter):\n\t(singleton from (Encounter.diagnosis D where D.use ~ ToConcept(\"Billing\") and D.rank.value = 1)) PD\n\t\treturn singleton from ([Condition: id in \"GetId\"(PD.condition.reference)])"
      }, {
        "url": "displaySequence",
        "valueInteger": 9
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToConcept"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.\n*/\ndefine function ToConcept(concept FHIR.CodeableConcept):\n    if concept is null then\n        null\n    else\n        System.Concept {\n            codes: concept.coding C return ToCode(C),\n            display: concept.text.value\n        }"
      }, {
        "url": "displaySequence",
        "valueInteger": 10
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToCode"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.\n*/\ndefine function ToCode(coding FHIR.Coding):\n    if coding is null then\n        null\n    else\n        System.Code {\n          code: coding.code.value,\n          system: coding.system.value,\n          version: coding.version.value,\n          display: coding.display.value\n        }"
      }, {
        "url": "displaySequence",
        "valueInteger": 11
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "GetId"
      }, {
        "url": "statement",
        "valueString": "define function \"GetId\"(uri String):\n\tLast(Split(uri, '/'))"
      }, {
        "url": "displaySequence",
        "valueInteger": 12
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value string): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 13
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value EncounterStatus): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 14
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Measure Observation"
      }, {
        "url": "statement",
        "valueString": "define function \"Measure Observation\" (Encounter \"Encounter\" ) :\n  duration in minutes of \"Related ED Visit\"(Encounter).period"
      }, {
        "url": "displaySequence",
        "valueInteger": 15
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXM55"
      }, {
        "url": "name",
        "valueString": "Related ED Visit"
      }, {
        "url": "statement",
        "valueString": "//Measure Observation\ndefine function \"Related ED Visit\" (Encounter \"Encounter\" ) :\n  Last([\"Encounter\" : \"Emergency Department Visit\"] ED\n    where ED.status = 'finished'\n      and ED.period ends 1 hour or less before start of Encounter.period\n    sort by start of period )"
      }, {
        "url": "displaySequence",
        "valueInteger": 16
      } ]
    } ],
    "name": "EffectiveDataRequirements",
    "status": "active",
    "type": {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/library-type",
        "code": "module-definition"
      } ]
    },
    "relatedArtifact": [ {
      "type": "depends-on",
      "display": "Library FHIRHelpers",
      "resource": "http://hl7.org/fhir/uv/cql/Library/FHIRHelpers|4.0.1"
    }, {
      "type": "depends-on",
      "display": "Code system Diagnosis Role",
      "resource": "http://terminology.hl7.org/CodeSystem/diagnosis-role"
    }, {
      "type": "depends-on",
      "display": "Value set Psychiatric/Mental Health Patient",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.299"
    }, {
      "type": "depends-on",
      "display": "Value set Emergency Department Visit",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"
    }, {
      "type": "depends-on",
      "display": "Value set Hospital Settings",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.126"
    } ],
    "parameter": [ {
      "name": "Measurement Period",
      "use": "in",
      "min": 0,
      "max": "1",
      "type": "Period"
    }, {
      "name": "Stratification 3",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    }, {
      "name": "Stratification 2",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    }, {
      "name": "Measure Population Exclusion",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    }, {
      "name": "Stratification 1",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    }, {
      "name": "Initial Population",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    }, {
      "name": "Measure Population",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    } ],
    "dataRequirement": [ {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
      "mustSupport": [ "period", "use", "rank", "rank.value", "condition", "condition.reference" ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
      "mustSupport": [ "type", "period", "status", "hospitalization", "hospitalization.admitSource", "use", "rank", "rank.value", "condition", "condition.reference" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"
      } ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
      "mustSupport": [ "id" ],
      "codeFilter": [ {
        "path": "id"
      } ]
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-populationBasis",
    "valueCode": "Encounter"
  }, {
    "url": "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem",
    "valueReference": {
      "reference": "Device/software-system-example"
    }
  }, {
    "url": "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-effectiveDataRequirements",
    "valueCanonical": "#effective-data-requirements-exm55"
  } ],
  "url": "http://hl7.org/fhir/uv/cqm/Measure/EXM55-FHIR",
  "identifier": [ {
    "use": "official",
    "system": "http://example.org/fhir/cqi/ecqm/Measure/Identifier/exm",
    "value": "55"
  } ],
  "version": "5.0.0",
  "name": "EXM55",
  "title": "EXM55 - Median Emergency Department Visit Duration",
  "status": "active",
  "experimental": true,
  "date": "2025-08-07",
  "publisher": "Health Level 7 International - Clinical Quality Information Work Group",
  "contact": [ {
    "telecom": [ {
      "system": "url",
      "value": "http://www.hl7.org/Special/committees/cqi/index.cfm"
    } ]
  } ],
  "description": "This example illustrates a continuous variable measure represented as a FHIR eCQM",
  "useContext": [ {
    "code": {
      "system": "http://terminology.hl7.org/CodeSystem/usage-context-type",
      "code": "venue",
      "display": "Clinical Venue"
    },
    "valueCodeableConcept": {
      "coding": [ {
        "system": "http://hl7.org/fhir/uv/cqm/CodeSystem/intended-venue-codes",
        "code": "eh",
        "display": "EH"
      } ]
    }
  } ],
  "jurisdiction": [ {
    "coding": [ {
      "system": "urn:iso:std:iso:3166",
      "code": "US"
    } ]
  } ],
  "approvalDate": "2019-03-08",
  "lastReviewDate": "2019-03-08",
  "effectivePeriod": {
    "start": "2018-01-01",
    "end": "2018-12-31"
  },
  "topic": [ {
    "coding": [ {
      "system": "http://loinc.org",
      "code": "57024-2",
      "display": "Health Quality Measure Document"
    } ]
  } ],
  "library": [ "http://hl7.org/fhir/uv/cqm/Library/EXM55" ],
  "scoring": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/measure-scoring",
      "code": "continuous-variable",
      "display": "Continuous Variable"
    } ]
  },
  "type": [ {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/measure-type",
      "code": "process"
    } ]
  } ],
  "improvementNotation": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/measure-improvement-notation",
      "code": "decrease",
      "display": "Decreased score indicates improvement"
    } ]
  },
  "group": [ {
    "id": "group-1",
    "extension": [ {
      "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.linkId",
      "valueString": "primary"
    } ],
    "population": [ {
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exm55-initial-population"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "initial-population",
          "display": "Initial Population"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Initial Population"
      }
    }, {
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exm55-measure-population"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "measure-population",
          "display": "Measure Population"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Measure Population"
      }
    }, {
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exm55-measure-population-exclusion"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "measure-population-exclusion",
          "display": "Measure Population Exclusion"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Measure Population Exclusion"
      }
    }, {
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exm55-measure-population-identifier"
      }, {
        "url": "http://hl7.org/fhir/StructureDefinition/cqf-criteriaReference",
        "valueString": "measure-population-identifier"
      }, {
        "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-aggregateMethod",
        "valueCode": "median"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "measure-observation",
          "display": "Measure Observation"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Measure Observation"
      }
    } ],
    "stratifier": [ {
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.stratifier.linkId",
        "valueString": "primary-exm55-stratification-1"
      }, {
        "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "code": {
        "coding": [ {
          "system": "http://example.org/stratification",
          "code": "Stratification 1",
          "display": "Stratification 1"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 1"
      }
    }, {
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.stratifier.linkId",
        "valueString": "primary-exm55-stratificatio-2"
      }, {
        "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "code": {
        "coding": [ {
          "system": "http://example.org/stratification",
          "code": "Stratification 2",
          "display": "Stratification 2"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 2"
      }
    }, {
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.stratifier.linkId",
        "valueString": "primary-exm55-stratification-3"
      }, {
        "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "code": {
        "coding": [ {
          "system": "http://example.org/stratification",
          "code": "Stratification 3",
          "display": "Stratification 3"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 3"
      }
    } ]
  } ]
}