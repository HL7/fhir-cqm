{
  "resourceType": "Measure",
  "id": "EXMRatio-FHIR",
  "meta": {
    "profile": [ "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-ratiomeasure", "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-computablemeasure", "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-cqlmeasure", "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-computablemeasure" ]
  },
  "contained": [ {
    "resourceType": "Library",
    "id": "effective-data-requirements",
    "extension": [ {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXMRatio"
      }, {
        "url": "name",
        "valueString": "Qualifying Encounters"
      }, {
        "url": "statement",
        "valueString": "define \"Qualifying Encounters\":\n  [\"Encounter\": \"Inpatient\"]"
      }, {
        "url": "displaySequence",
        "valueInteger": 0
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXMRatio"
      }, {
        "url": "name",
        "valueString": "Initial Population"
      }, {
        "url": "statement",
        "valueString": "define \"Initial Population\":\n  \"Qualifying Encounters\""
      }, {
        "url": "displaySequence",
        "valueInteger": 1
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXMRatio"
      }, {
        "url": "name",
        "valueString": "Numerator"
      }, {
        "url": "statement",
        "valueString": "define \"Numerator\":\n  \"Initial Population\""
      }, {
        "url": "displaySequence",
        "valueInteger": 2
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXMRatio"
      }, {
        "url": "name",
        "valueString": "Denominator"
      }, {
        "url": "statement",
        "valueString": "define \"Denominator\":\n  \"Initial Population\""
      }, {
        "url": "displaySequence",
        "valueInteger": 3
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXMRatio"
      }, {
        "url": "name",
        "valueString": "Falls with Major Injury"
      }, {
        "url": "statement",
        "valueString": "define \"Falls with Major Injury\":\n  [\"Observation\": \"Fall\"]"
      }, {
        "url": "displaySequence",
        "valueInteger": 4
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXMRatio"
      }, {
        "url": "name",
        "valueString": "Denominator Observation"
      }, {
        "url": "statement",
        "valueString": "define function \"Denominator Observation\"(Encounter \"Encounter\"):\n  duration in hours of Global.Hospitalization(Encounter) / 24"
      }, {
        "url": "displaySequence",
        "valueInteger": 5
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "MATGlobalCommonFunctions"
      }, {
        "url": "name",
        "valueString": "Hospitalization"
      }, {
        "url": "statement",
        "valueString": "define function \"Hospitalization\"(TheEncounter FHIR.Encounter):\n\t( \"ED Visit\"(TheEncounter) ) X\n    return\n        if X is null then TheEncounter.period\n        else Interval[start of FHIRHelpers.ToInterval(X.period), end of FHIRHelpers.ToInterval(TheEncounter.period)]"
      }, {
        "url": "displaySequence",
        "valueInteger": 6
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "MATGlobalCommonFunctions"
      }, {
        "url": "name",
        "valueString": "ED Visit"
      }, {
        "url": "statement",
        "valueString": "define function \"ED Visit\"(TheEncounter FHIR.Encounter):\n    singleton from (\n        [Encounter: \"Emergency Department Visit\"] EDVisit\n            where EDVisit.status = 'finished'\n                and EDVisit.period ends 1 hour or less on or before start of FHIRHelpers.ToInterval(TheEncounter.period)\n    )"
      }, {
        "url": "displaySequence",
        "valueInteger": 7
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToString"
      }, {
        "url": "statement",
        "valueString": "define function ToString(value EncounterStatus): value.value"
      }, {
        "url": "displaySequence",
        "valueInteger": 8
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToInterval"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Converts the given [Period](https://hl7.org/fhir/datatypes.html#Period)\nvalue to a CQL DateTime Interval\n@comment: If the start value of the given period is unspecified, the starting\nboundary of the resulting interval will be open (meaning the start of the interval\nis unknown, as opposed to interpreted as the beginning of time).\n*/\ndefine function ToInterval(period FHIR.Period):\n    if period is null then\n        null\n    else\n        if period.\"start\" is null then\n            Interval(period.\"start\".value, period.\"end\".value]\n        else\n            Interval[period.\"start\".value, period.\"end\".value]"
      }, {
        "url": "displaySequence",
        "valueInteger": 9
      } ]
    }, {
      "url": "http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "EXMRatio"
      }, {
        "url": "name",
        "valueString": "Numerator Observation"
      }, {
        "url": "statement",
        "valueString": "define function \"Numerator Observation\"(Encounter \"Encounter\"):\n  Count(\n    \"Falls with Major Injury\" Falls\n      where Global.\"Normalize Interval\"(Falls.effective) during Encounter.period\n  )"
      }, {
        "url": "displaySequence",
        "valueInteger": 10
      } ]
    } ],
    "name": "EffectiveDataRequirements",
    "status": "active",
    "type": {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/library-type",
        "code": "module-definition"
      } ]
    },
    "relatedArtifact": [ {
      "type": "depends-on",
      "display": "Library Global",
      "resource": "http://hl7.org/fhir/uv/cqm/Library/MATGlobalCommonFunctions|5.0.000"
    }, {
      "type": "depends-on",
      "display": "Library FHIRHelpers",
      "resource": "http://hl7.org/fhir/uv/cql/Library/FHIRHelpers|4.0.1"
    }, {
      "type": "depends-on",
      "display": "Value set Inpatient",
      "resource": "http://example.org/fhir/ValueSet/inpatient"
    }, {
      "type": "depends-on",
      "display": "Value set Emergency Department Visit",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"
    }, {
      "type": "depends-on",
      "display": "Value set Fall",
      "resource": "http://example.org/fhir/ValueSet/fall"
    } ],
    "parameter": [ {
      "name": "Numerator",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    }, {
      "name": "Denominator",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    }, {
      "name": "Initial Population",
      "use": "out",
      "min": 0,
      "max": "*",
      "type": "Encounter"
    } ],
    "dataRequirement": [ {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
      "mustSupport": [ "type", "status", "period" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Encounter" ],
      "mustSupport": [ "type", "period" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://example.org/fhir/ValueSet/inpatient"
      } ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
      "mustSupport": [ "code", "effective" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://example.org/fhir/ValueSet/fall"
      } ]
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-populationBasis",
    "valueCode": "Encounter"
  }, {
    "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-scoringUnit",
    "valueCodeableConcept": {
      "coding": [ {
        "system": "http://unitsofmeasure.org",
        "code": "/1000.d"
      } ]
    }
  }, {
    "url": "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem",
    "valueReference": {
      "reference": "Device/software-system-example"
    }
  }, {
    "id": "effective-data-requirements",
    "url": "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-effectiveDataRequirements",
    "valueCanonical": "#effective-data-requirements"
  } ],
  "url": "http://example.org/fhir/measures/measure-ratio-exm",
  "identifier": [ {
    "system": "http://example.org/fhir/cqi/ecqm/Measure/Identifier/exm",
    "value": "EXMRatio-FHIR"
  } ],
  "version": "2.0.0",
  "name": "EXMRatioMeasure",
  "title": "EXM Ratio Measure",
  "status": "active",
  "experimental": true,
  "date": "2025-08-13",
  "publisher": "Clinical Quality Information WG",
  "contact": [ {
    "telecom": [ {
      "system": "url",
      "value": "http://www.hl7.org/Special/committees/cqi"
    } ]
  } ],
  "description": "An example FHIR-based publishable measure",
  "useContext": [ {
    "code": {
      "system": "http://terminology.hl7.org/CodeSystem/usage-context-type",
      "code": "venue",
      "display": "Clinical Venue"
    },
    "valueCodeableConcept": {
      "coding": [ {
        "system": "http://hl7.org/fhir/uv/cqm/CodeSystem/intended-venue-codes",
        "code": "ec",
        "display": "EC"
      } ]
    }
  } ],
  "jurisdiction": [ {
    "coding": [ {
      "system": "urn:iso:std:iso:3166",
      "code": "US"
    } ]
  } ],
  "purpose": "This measure has been developed to support improvement in clinical care.",
  "usage": "Users of this measure should be aware of...",
  "copyright": "Example Copyright Statement",
  "approvalDate": "2019-02-17",
  "lastReviewDate": "2019-02-17",
  "effectivePeriod": {
    "extension": [ {
      "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-effectivePeriodAnchor",
      "valueDateTime": "2018-01-01"
    }, {
      "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-effectivePeriodDuration",
      "valueDuration": {
        "value": 1,
        "system": "http://unitsofmeasure.org",
        "code": "a"
      }
    } ],
    "start": "2018-01-01",
    "end": "2018-12-31"
  },
  "topic": [ {
    "coding": [ {
      "system": "http://loinc.org",
      "code": "57024-2"
    } ],
    "text": "Health Quality Measure Document"
  } ],
  "author": [ {
    "name": "Example Measure Content Developer"
  } ],
  "library": [ "http://hl7.org/fhir/uv/cqm/Library/EXMRatio" ],
  "disclaimer": "Example disclaimer",
  "scoring": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/measure-scoring",
      "code": "ratio",
      "display": "Ratio"
    } ]
  },
  "type": [ {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/measure-type",
      "code": "process"
    } ]
  } ],
  "rationale": "The rationale of this measure is...",
  "improvementNotation": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/measure-improvement-notation",
      "code": "decrease",
      "display": "Decreased score indicates improvement"
    } ]
  },
  "group": [ {
    "id": "group-1",
    "extension": [ {
      "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.linkId",
      "valueString": "primary"
    } ],
    "population": [ {
      "id": "initial-population",
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exmratio-initial-population"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "initial-population",
          "display": "Initial Population"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Initial Population"
      }
    }, {
      "id": "numerator",
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exmratio-numerator"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "numerator",
          "display": "Numerator"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Numerator"
      }
    }, {
      "id": "denominator",
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exmratio-denominator"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator",
          "display": "Denominator"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator"
      }
    }, {
      "id": "denominator-observation",
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exmratio-denominator-observation"
      }, {
        "url": "http://hl7.org/fhir/StructureDefinition/cqf-criteriaReference",
        "valueString": "denominator"
      }, {
        "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-aggregateMethod",
        "valueCode": "sum"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "measure-observation",
          "display": "Measure Observation"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator Observation"
      }
    }, {
      "id": "numerator-observation",
      "extension": [ {
        "url": "http://hl7.org/fhir/5.0/StructureDefinition/extension-Measure.group.population.linkId",
        "valueString": "primary-exmratio-numerator-observation"
      }, {
        "url": "http://hl7.org/fhir/StructureDefinition/cqf-criteriaReference",
        "valueString": "numerator"
      }, {
        "url": "http://hl7.org/fhir/uv/cqm/StructureDefinition/cqm-aggregateMethod",
        "valueCode": "sum"
      } ],
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "measure-observation",
          "display": "Measure Observation"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Numerator Observation"
      }
    } ]
  } ]
}